extends layouts/default

block masthead
  - if (page && page.masthead)
    style.
      .masthead {
        background: url('#{page.masthead}');
      }

block content
  //- TODO: allow "requirements" to set the local variable names
  - var favorites = messages.slice(0);
  - favorites.sort(function(a, b) { return b.stats.reactions - a.stats.reactions; });
  
  .ui.vertical.stripe.segment.content
    h2.ui.horizontal.header.divider
      small(style="color: rgba(0,0,0,.4);") @
      | #{person.id}
    .ui.grid.stackable
      .row
        .four.wide.column
          include partials/person
        .nine.wide.column
          if (favorites.length)
            .ui.message
              .content
                .header Top Contribution
                .ui.comments
                  - var message = favorites[0]
                  include partials/message
          .ui.comments
            - messages.sort(function(a, b) { return b.created - a.created; });
            - messages = messages.slice(0, 10);
            for message in messages
              include partials/message
        .three.wide.column
          .ui.vertical.fluid.menu
            - topicMemberships.sort(function(a, b) { return b.people.length - a.people.length; });
          
            a.header.item #{topicMemberships.length} memberships
            for topic in topicMemberships
              a.item(href="/topics/#{topic.id}")
                small(style="color: rgba(0,0,0,.4);") &#35;
                |  #{topic.id}
                .ui.icon.label
                  i.users.icon
                  | #{topic.people.length}
